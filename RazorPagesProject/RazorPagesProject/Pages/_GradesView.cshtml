@page
@using RazorPagesProject.Models;
@model RazorPagesProject.Pages._GradesViewModel
@{
}

<!DOCTYPE html>
<html>
<head>
	<title>Student Grades</title>
</head>
	<div class="grades-container">
	<table>
		<thead>
			<tr>
				<th>Number</th>
				<th>Subject</th>
				<th>First Semester</th>
				<th>Second Semester</th>
				<th>Year</th>
			</tr>
		</thead>
		<tbody>
			@foreach (SubjectGrades subjectGrades in Model.currentStudent.GetGradeBook())
			{
				<tr>
					<td>Nr: X</td>
					<td>@subjectGrades.Subject.ToString()</td>
					<td>
						@try
						{
							if (subjectGrades.GetGrades().Count != 0)
							{
								@foreach (Grade grade in subjectGrades.GetGrades())
								{
									<form class="grade-value grade-details" method="post">

										<input type="hidden" name="SubjectGradesId" value="@subjectGrades.Id" />
										<input type="hidden" name="UserId" value="@Model.currentStudent.Userid" />

										@grade.GradeEnum.ToString()
										<button class="x-icon" asp-page-handler="DeleteGrade" type="submit" name="GradeId" value="@grade.IdGrade">x</button>
									</form>
								}
							}
							else
							{
								<p>No Grades Here!</p>
							}
							
						}
						catch (Exception)
						{
							<p>Something went wrong!</p>
						}

@*						<div class="plus-icon-container">*@
							<span class="plus-icon">
								+
								<form class="dropdown" method="post">

									<input type="hidden" name="SubjectGradesId" value="@subjectGrades.Id" />
									<input type="hidden" name="UserId" value="@Model.currentStudent.Userid" />

									<button class="grade-value grade-details" asp-page-handler="AddGrade" type="submit" value="Submit" name="Button1" >
										UNDEFINED
									</button>

									<button class="grade-value grade-details" asp-page-handler="AddGrade" type="submit" value="Submit" name="Button2">
										SUFFICIENT
									</button>

									<button class="grade-value grade-details" asp-page-handler="AddGrade" type="submit" value="Submit" name="Button3">
										GOOD
									</button>

									<button class="grade-value grade-details" asp-page-handler="AddGrade" type="submit" value="Submit" name="Button4">
										OUTSTANDING
									</button>
								</form>
							</span>
							
@*						</div>*@
					</td>
					<td>
						@*<span class="grade-value">(SCND SEM GRADE)</span>*@

						<span class="plus-icon">+</span>
					</td>
					<td>Year Nr X</td>
				</tr>
			}
		</tbody>
	</table>
	</div>
</html>